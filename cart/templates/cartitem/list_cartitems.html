{% extends "pages/base.html" %}
{% block title %}
<title>My Cart</title>
{% endblock %}
{% block content %}
<div class="progress">
  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 30%"></div>
</div>
    <p style="text-secondary">Items in your shopping Cart:</p>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Thumbnail</th>
          <th>Title</th>
          <th>Price</th>
          <!-- <th>Seller</th> -->
          <!-- <th>Market</th> -->
        </tr>
      </thead>
      <tbody>
        {% for item in cartitems %}
        <tr>
          <td><img src="{{item.product.image.url}}" alt="{{item.product.image}}" class="img-thumbnail"></td>
          <td>{{item.product.title}}</td>
          <td class = "price">{{item.product.my_price}}</td>
          <!-- <td>{{item.product.shop}}</td> -->
          <!-- <td>{{item.product.shop.market}}</td> -->
          <td><a class="btn btn-outline-danger mb-4" href="/cartitem/delete/{{item.id}}/">Remove</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="card mb-3">
        <div class="card-body">
            <form>
                <div class="form-group"> <label>Have coupon?</label>
                    <div class="input-group"> <input type="text" class="form-control coupon" name="" placeholder="Coupon code"> <span class="input-group-append"> <button class="btn btn-primary btn-apply coupon">Apply</button> </span> </div>
                  </div>
            </form>
        </div>
    </div>

    <a class="btn btn-primary" style="width:100%" href="/order/">Place Order</a>
    <a class="btn btn-success mt-1" style="width:100%" href="/">Continue Shopping</a>
    <p style="text-secondary">Items in your Wishlist:</p>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Thumbnail</th>
          <th>Title</th>
          <th>Price</th>
          <!-- <th>Seller</th> -->
          <!-- <th>Market</th> -->
        </tr>
      </thead>
      <tbody>
        {% for item in wishlistitems %}
        <tr>
          <td><img src="{{item.product.image.url}}" alt="{{item.product.image}}" class="img-thumbnail"></td>
          <td>{{item.product.title}}</td>
          <td class = "price">{{item.product.my_price}}</td>
          <!-- <td>{{item.product.shop}}</td> -->
          <!-- <td>{{item.product.shop.market}}</td> -->
          <td><a class="btn btn-outline-danger mb-4" href="/wishlistitem/delete/{{item.id}}/">Remove</a></td>
          <td><a class="btn btn-outline-danger mb-4" href="/wishlistitem/move/{{item.id}}/">Add to Cart</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
<hr>
<script>
  var eles = document.getElementsByClassName("price");
  var total = 0;
  for(var i=0 ; i< eles.length ; i++){
    // console.log(eles[i]);
    total+=parseInt(eles[i].textContent);
  }
  document.getElementById('total').textContent = "Total: " +"â‚¹ "+ total;
</script>
<script>
  function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
    return v.toString(16);
  });
  }
  if( device)
  let device = 'my-id';
  document.cookie = 'device='+ device +";domain;path=/";
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
{% endblock %}
